# Nextest configuration for CI test runs
# This configures how cargo-nextest runs tests and generates reports

[profile.default]
# Run tests with all available threads
test-threads = "num-cpus"

# Show test output for failed tests
failure-output = "immediate-final"
success-output = "never"

# Retry failed tests once to handle flaky tests
retries = 1

[profile.ci]
# CI-specific profile for generating JUnit reports
# Run tests with all available threads
test-threads = "num-cpus"

# Show output for failed tests
failure-output = "final"
success-output = "never"

# Retry failed tests once
retries = 1

# Fail fast in CI - stop on first failure
fail-fast = false

# Set timeout for individual tests (10 minutes)
slow-timeout = { period = "60s", terminate-after = 2 }
